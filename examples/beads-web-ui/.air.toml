# Air live-reload configuration for beads-web-ui.
# See https://github.com/air-verse/air for full options.

root = "."
tmp_dir = "tmp"

[build]
  # Auto-rebuild frontend dist before compiling Go.
  pre_cmd = ["./scripts/ensure-frontend.sh"]
  cmd = "go build -o ./tmp/beads-web-ui ."
  bin = "./tmp/beads-web-ui"
  args_bin = ["-port", "8080"]
  # Watch Go files only; frontend changes are handled by vite dev or manual rebuild.
  include_ext = ["go", "tpl", "tmpl", "html"]
  exclude_dir = ["tmp", "frontend", "node_modules", "vendor", "testdata", ".git"]
  exclude_regex = ["_test\\.go$"]
  delay = 1000

[log]
  time = false
  main_only = false

[color]
  main = "magenta"
  watcher = "cyan"
  build = "yellow"
  runner = "green"

[misc]
  clean_on_exit = true
